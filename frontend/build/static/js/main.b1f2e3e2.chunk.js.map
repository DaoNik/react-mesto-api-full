{"version":3,"sources":["utils/api.js","contexts/CurrentUserContext.js","components/Card.js","images/logo.svg","components/Header.js","components/Main.js","components/Footer.js","components/ImagePopup.js","images/Avatar.png","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Login.js","components/Register.js","images/Union.svg","images/cross.svg","components/InfoTooltip.js","utils/auth.js","components/RequireAuth.js","components/App.js","index.js"],"names":["options","this","_url","url","_headers","headers","localStorage","getItem","res","ok","json","Promise","reject","fetch","method","authorization","_getToken","then","_checkRequest","name","description","body","JSON","stringify","about","link","likes","avatar","cardId","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","useState","some","i","_id","isLiked","setIsLiked","isOwn","owner","cardDeleteButtonClassName","className","onClick","src","alt","type","length","Header","text","onLogout","userEmail","to","logo","Main","props","onEditProfile","onEditAvatar","onAddPlace","cards","map","Footer","Date","getFullYear","ImagePopup","onClose","isOpen","PopupWithForm","title","children","onSubmit","submitButtonText","EditProfilePopup","setName","setDescription","useEffect","e","preventDefault","onUpdateUser","id","placeholder","minLength","maxLength","value","onChange","target","required","EditAvatarPopup","inputAvatarLink","useRef","current","focus","onUpdateAvatar","ref","AddPlacePopup","setLink","Login","email","setEmail","password","setPassword","Register","InfoTooltip","isRegister","union","cross","BASE_URL","checkRequest","status","RequireAuth","Component","component","loggedIn","App","navigate","useNavigate","setUserEmail","setLoggedIn","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","handleCardLike","api","deleteLike","newCard","state","c","catch","err","console","log","addLike","handleDeleteCard","deleteCard","filter","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardClick","closeAllPopups","handleCheckRegister","addCards","newCards","getUserInfo","user","closeByEscape","key","document","addEventListener","removeEventListener","location","useLocation","path","token","Authorization","data","handleTokenCheck","pathname","handleLogout","removeItem","Provider","exact","element","response","auth","setItem","addNewUserInfo","updateAvatar","addNewCard","ReactDOM","render","querySelector"],"mappings":"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","file":"static/js/main.b1f2e3e2.chunk.js","sourcesContent":["class Api {\n  constructor(options) {\n    this._url = options.url;\n    this._headers = options.headers;\n  }\n\n  _getToken() {\n    return `Bearer ${localStorage.getItem('token')}`;\n  }\n\n  _checkRequest(res) {\n    if (res.ok) {\n      return res.json();\n    }\n\n    return Promise.reject('Произошла ошибка');\n  }\n\n  getUserInfo() {\n    return fetch(`${this._url}users/me`, {\n      method: 'GET',\n      headers: {\n        authorization: this._getToken(),\n        ...this._headers,\n      },\n    }).then((res) => {\n      return this._checkRequest(res);\n    });\n  }\n\n  addNewUserInfo(name, description) {\n    return fetch(`${this._url}users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._getToken(),\n        ...this._headers,\n      },\n      body: JSON.stringify({\n        name: name,\n        about: description,\n      }),\n    }).then((res) => {\n      return this._checkRequest(res);\n    });\n  }\n\n  addCards() {\n    return fetch(`${this._url}cards`, {\n      method: 'GET',\n      headers: {\n        authorization: this._getToken(),\n        ...this._headers,\n      },\n    }).then((res) => {\n      return this._checkRequest(res);\n    });\n  }\n\n  addNewCard({ name, link, likes } /*, renderCreating, button*/) {\n    // renderCreating(true, button);\n    return fetch(`${this._url}cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._getToken(),\n        ...this._headers,\n      },\n      body: JSON.stringify({\n        name: name,\n        link: link,\n      }),\n    }).then((res) => {\n      return this._checkRequest(res);\n    });\n  }\n\n  updateAvatar(avatar /*, renderSaving, button*/) {\n    // renderSaving(true, button);\n    return fetch(`${this._url}users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._getToken(),\n        ...this._headers,\n      },\n      body: JSON.stringify({\n        avatar: avatar,\n      }),\n    }).then((res) => {\n      return this._checkRequest(res);\n    });\n  }\n\n  addLike(cardId) {\n    return fetch(`${this._url}cards/${cardId}/likes`, {\n      method: 'PUT',\n      headers: {\n        authorization: this._getToken(),\n        ...this._headers,\n      },\n    }).then((res) => {\n      return this._checkRequest(res);\n    });\n  }\n\n  deleteLike(cardId) {\n    return fetch(`${this._url}cards/${cardId}/likes`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._getToken(),\n        ...this._headers,\n      },\n    }).then((res) => {\n      return this._checkRequest(res);\n    });\n  }\n\n  deleteCard(cardId /*renderDeleting, button*/) {\n    // renderDeleting(true, button);\n    return fetch(`${this._url}cards/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._getToken(),\n        ...this._headers,\n      },\n    }).then((res) => {\n      return this._checkRequest(res);\n    });\n  }\n}\n\nexport default new Api({\n  url: 'http://localhost:3001/',\n  headers: {\n    // authorization: \"965be665-caac-4684-953a-3ef75da5404d\",\n    'Content-Type': 'application/json',\n  },\n});\n","import React from \"react\";\n\nconst CurrentUserContext = React.createContext();\nexport default CurrentUserContext;\n","import React from 'react';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\n\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const [isLiked, setIsLiked] = React.useState(\n    card.likes.some((i) => i === currentUser._id)\n  );\n  const isOwn = card.owner === currentUser._id;\n\n  const cardDeleteButtonClassName = `gallery__card-btn-trash ${\n    isOwn ? '' : 'gallery__card-btn-trash_hidden'\n  }`;\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleLikeClick() {\n    setIsLiked(!isLiked);\n    onCardLike(card, isLiked);\n  }\n\n  function handleDeleteCard() {\n    onCardDelete(card);\n  }\n\n  return (\n    <li className='gallery__card'>\n      <h2 className='gallery__card-title'>{card.name}</h2>\n      <img\n        onClick={handleClick}\n        src={card.link}\n        alt={card.name}\n        className='gallery__card-img'\n      />\n      <button\n        type='button'\n        className={`gallery__card-btn ${\n          isLiked ? 'gallery__card-btn_active' : ''\n        }`}\n        aria-label='Кнопка лайка'\n        data-before={card.likes.length}\n        onClick={handleLikeClick}\n      ></button>\n      <button\n        type='button'\n        className={cardDeleteButtonClassName}\n        aria-label='Кнопка удаления карточки'\n        onClick={handleDeleteCard}\n      ></button>\n    </li>\n  );\n}\n\nexport default Card;\n","export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import React from 'react';\nimport logo from '../images/logo.svg';\nimport { Link } from 'react-router-dom';\n\nfunction Header({ link, text, onLogout, userEmail }) {\n  function handleLogout() {\n    if (text === 'Выйти') {\n      onLogout();\n    }\n  }\n\n  return (\n    <header className='header'>\n      <Link to='/' className='header__link'>\n        <img src={logo} alt='Логотип Mesto-Russia' className='header__image' />\n      </Link>\n      <div className='header__auth-block'>\n        <p className='header__email'>{userEmail}</p>\n        <Link onClick={handleLogout} className='header__link-auth' to={link}>\n          {text}\n        </Link>\n      </div>\n    </header>\n  );\n}\n\nexport default Header;\n","import React from 'react';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport Card from './Card';\nimport Header from './Header';\n\nfunction Main(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <>\n      <Header\n        link='/sign-in'\n        userEmail={props.userEmail}\n        onLogout={props.onLogout}\n        text='Выйти'\n      />\n      <main>\n        <section className='profile'>\n          <div className='profile__wrapper'>\n            <h1 className='profile__title'>{currentUser.name}</h1>\n            <p className='profile__subtitle'>{currentUser.about}</p>\n            <button\n              type='button'\n              onClick={props.onEditProfile}\n              className='profile__button-edit'\n              aria-label='Кнопка для открытия окна редактирования имени пользователя и рода деятельности'\n            ></button>\n          </div>\n          <div\n            className='profile__container-avatar'\n            onClick={props.onEditAvatar}\n          >\n            <img\n              className='profile__avatar'\n              src={currentUser.avatar}\n              alt='Аватар профиля'\n            />\n          </div>\n          <button\n            type='button'\n            onClick={props.onAddPlace}\n            className='profile__button-add'\n            aria-label='Кнопка для открытия окна добавления мест'\n          ></button>\n        </section>\n\n        <section className='gallery'>\n          <ul className='gallery__cards'>\n            {props.cards.map((card) => {\n              return (\n                <Card\n                  key={card._id}\n                  card={card}\n                  onCardClick={props.onCardClick}\n                  onCardLike={props.onCardLike}\n                  onCardDelete={props.onCardDelete}\n                />\n              );\n            })}\n          </ul>\n        </section>\n      </main>\n    </>\n  );\n}\n\nexport default Main;\n","import React from \"react\";\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__title\">\n        &copy; {new Date().getFullYear()} Mesto Russia\n      </p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from \"react\";\n\nfunction ImagePopup({ card, onClose }) {\n  return (\n    <div className={`popup popup_view ${card.isOpen ? \"popup_opened\" : \"\"}`}>\n      <div className=\"popup__view-container\">\n        <h2 className=\"popup__view-title\">{card.name}</h2>\n        <img src={card.link} alt={card.name} className=\"popup__view-image\" />\n        <button\n          onClick={onClose}\n          type=\"button\"\n          className=\"popup__btn-closed\"\n          aria-label=\"Кнопка закрытия всплывающего окна\"\n        ></button>\n      </div>\n    </div>\n  );\n}\n\nexport default ImagePopup;\n","export default __webpack_public_path__ + \"static/media/Avatar.727b5baa.png\";","import React from \"react\";\n\nfunction PopupWithForm({\n  name,\n  title,\n  children,\n  isOpen,\n  onClose,\n  onSubmit,\n  submitButtonText,\n}) {\n  return (\n    <div className={`popup popup_${name} ${isOpen ? \"popup_opened\" : \"\"}`}>\n      <div className=\"popup__container\">\n        <form className=\"popup__form\" name={name} onSubmit={onSubmit}>\n          <h2 className=\"popup__title\">{title}</h2>\n          {children}\n          <button type=\"submit\" className=\"popup__btn popup__btn-add\">\n            {submitButtonText}\n          </button>\n        </form>\n        <button\n          onClick={onClose}\n          type=\"button\"\n          className=\"popup__btn-closed\"\n          aria-label=\"Кнопка закрытия всплывающего окна\"\n        ></button>\n      </div>\n    </div>\n  );\n}\n\nexport default PopupWithForm;\n","import React from \"react\";\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditProfilePopup(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const [name, setName] = React.useState(currentUser.name);\n  const [description, setDescription] = React.useState(currentUser.about);\n\n  function handleChangeName(e) {\n    setName(e.target.value);\n  }\n\n  function handleChangeDescription(e) {\n    setDescription(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser, props.isOpen]);\n\n  return (\n    <PopupWithForm\n      name={\"edit\"}\n      title={\"Редактировать профиль\"}\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      submitButtonText={\"Сохранить\"}\n    >\n      <input\n        className=\"popup__input popup__input_value_name\"\n        id=\"name\"\n        name=\"name\"\n        type=\"text\"\n        placeholder=\"Никнейм\"\n        minLength=\"2\"\n        maxLength=\"40\"\n        value={name}\n        onChange={handleChangeName}\n        required\n      />\n      <span className=\"popup__error\" id=\"name-error\"></span>\n      <input\n        className=\"popup__input popup__input_value_job\"\n        id=\"job\"\n        name=\"job\"\n        type=\"text\"\n        placeholder=\"Род деятельности\"\n        minLength=\"2\"\n        maxLength=\"200\"\n        value={description}\n        onChange={handleChangeDescription}\n        required\n      />\n      <span className=\"popup__error\" id=\"job-error\"></span>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditAvatarPopup(props) {\n  const inputAvatarLink = React.useRef(null);\n  function handleSubmit(e) {\n    e.preventDefault();\n    inputAvatarLink.current.focus();\n    props.onUpdateAvatar({\n      avatar: inputAvatarLink.current.value,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name={\"update-avatar\"}\n      title={\"Обновить аватар\"}\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      submitButtonText={\"Сохранить\"}\n    >\n      <input\n        className=\"popup__input\"\n        id=\"avatar-link\"\n        name=\"link\"\n        type=\"url\"\n        placeholder=\"Ссылка на картинку\"\n        ref={inputAvatarLink}\n        required\n      />\n      <span className=\"popup__error\" id=\"avatar-link-error\"></span>\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup(props) {\n  const [name, setName] = React.useState(\"\");\n  const [link, setLink] = React.useState(\"\");\n\n  function handleChangeName(e) {\n    setName(e.target.value);\n  }\n\n  function handleChangeLink(e) {\n    setLink(e.target.value);\n  }\n\n  function handleAddPlaceSubmit(e) {\n    e.preventDefault();\n\n    props.onAddPlace(name, link);\n  }\n\n  React.useEffect(() => {\n    setName(\"\");\n    setLink(\"\");\n  }, [props.isOpen]);\n\n  return (\n    <PopupWithForm\n      name={\"add\"}\n      title={\"Новое место\"}\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleAddPlaceSubmit}\n      submitButtonText={\"Создать\"}\n    >\n      <input\n        className=\"popup__input popup__input_value_place\"\n        id=\"place\"\n        name=\"name\"\n        type=\"text\"\n        placeholder=\"Название\"\n        minLength=\"2\"\n        maxLength=\"30\"\n        value={name}\n        onChange={handleChangeName}\n        required\n      />\n      <span className=\"popup__error\" id=\"place-error\"></span>\n      <input\n        className=\"popup__input popup__input_value_place-link\"\n        id=\"place-link\"\n        name=\"link\"\n        type=\"url\"\n        placeholder=\"Ссылка на картинку\"\n        value={link}\n        onChange={handleChangeLink}\n        required\n      />\n      <span className=\"popup__error\" id=\"place-link-error\"></span>\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;\n","import React from 'react';\nimport Header from './Header';\n\nexport default function Login({ onSubmit }) {\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n\n  function handleChangeEmail(e) {\n    setEmail(e.target.value);\n  }\n\n  function handleChangePassword(e) {\n    setPassword(e.target.value);\n  }\n\n  function handleLogin(e) {\n    e.preventDefault();\n\n    onSubmit(email, password);\n  }\n\n  return (\n    <>\n      <Header link='/sign-up' text='Зарегистрироваться' />\n      <section className='login'>\n        <h2 className='login__title'>Вход</h2>\n        <form onSubmit={handleLogin}>\n          <input\n            className='login__input'\n            value={email}\n            onChange={handleChangeEmail}\n            placeholder='Email'\n          ></input>\n          <input\n            type='password'\n            className='login__input'\n            value={password}\n            onChange={handleChangePassword}\n            placeholder='Пароль'\n          ></input>\n          <button className='login__submit' type='submit'>\n            Войти\n          </button>\n        </form>\n      </section>\n    </>\n  );\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from './Header';\n\nexport default function Register({ onSubmit }) {\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n\n  function handleChangeEmail(e) {\n    setEmail(e.target.value);\n  }\n\n  function handleChangePassword(e) {\n    setPassword(e.target.value);\n  }\n\n  function handleRegister(e) {\n    e.preventDefault();\n\n    onSubmit(email, password);\n  }\n\n  return (\n    <>\n      <Header link='/sign-in' text='Войти' />\n      <section className='login'>\n        <h2 className='login__title'>Регистрация</h2>\n        <form onSubmit={handleRegister}>\n          <input\n            className='login__input'\n            value={email}\n            onChange={handleChangeEmail}\n            placeholder='Email'\n          ></input>\n          <input\n            type='password'\n            className='login__input'\n            value={password}\n            onChange={handleChangePassword}\n            placeholder='Пароль'\n          ></input>\n          <button className='login__submit' type='submit'>\n            Зарегистрироваться\n          </button>\n          <Link to='/sign-in' className='login__link'>\n            Уже зарегистрированы? Войти\n          </Link>\n        </form>\n      </section>\n    </>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/Union.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/cross.7c6a020b.svg\";","import React from \"react\";\nimport union from \"../images/Union.svg\";\nimport cross from \"../images/cross.svg\";\n\nexport default function InfoTooltip({ isRegister, isOpen, onClose }) {\n  return (\n    <div className={`popup popup_info ${isOpen ? \"popup_opened\" : \"\"}`}>\n      <div className=\"popup__container\">\n        <img\n          className=\"popup__info-image\"\n          src={isRegister ? union : cross}\n          alt=\"Картинка отражающая успешность регистрации\"\n        />\n        <h2 className=\"popup__title popup__title_info\">\n          {isRegister\n            ? \"Вы успешно зарегистрировались!\"\n            : \"Что-то пошло не так! Попробуйте ещё раз.\"}\n        </h2>\n        <button\n          onClick={onClose}\n          type=\"button\"\n          className=\"popup__btn-closed\"\n          aria-label=\"Кнопка закрытия всплывающего окна\"\n        ></button>\n      </div>\n    </div>\n  );\n}\n","export const BASE_URL = 'http://localhost:3001';\n\nfunction checkRequest(res) {\n  if (res.ok) {\n    return res.json();\n  }\n\n  return Promise.reject(`Произошла ошибка ${res.status}`);\n}\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ password, email }),\n  }).then((response) => {\n    return checkRequest(response);\n  });\n};\n\nexport const authorize = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ password, email }),\n  })\n    .then((response) => checkRequest(response))\n    .then((data) => {\n      if (data.token) {\n        localStorage.setItem('token', data.token);\n\n        return data;\n      }\n    });\n};\n\nexport const checkToken = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`,\n    },\n  })\n    .then((res) => checkRequest(res))\n    .then((data) => data);\n};\n","import React from 'react';\nimport { Navigate } from 'react-router-dom';\n\nexport default function RequireAuth({ component: Component, ...props }) {\n  return props.loggedIn ? <Component {...props} /> : <Navigate to='/sign-in' />;\n}\n","import React from 'react';\nimport { Routes, Route, useNavigate, useLocation } from 'react-router-dom';\nimport '../index.css';\nimport api from '../utils/api';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ImagePopup from './ImagePopup';\nimport avatar from '../images/Avatar.png';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport Login from './Login';\nimport Register from './Register';\nimport InfoTooltip from './InfoTooltip';\nimport * as auth from '../utils/auth';\nimport RequireAuth from './RequireAuth';\n\nfunction App() {\n  const navigate = useNavigate();\n  const [userEmail, setUserEmail] = React.useState(\n    localStorage.getItem('email') ? localStorage.getItem('email') : ''\n  );\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =\n    React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\n    React.useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({\n    isOpen: false,\n    name: '',\n    link: '',\n  });\n  const [currentUser, setCurrentUser] = React.useState({\n    name: 'Жак-Ив Кусто',\n    about: 'Исследователь океана',\n    avatar: avatar,\n  });\n  const [cards, setCards] = React.useState([]);\n\n  React.useEffect(() => {\n    api\n      .addCards()\n      .then((newCards) => {\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(`Ошибка: ${err}`);\n      });\n  }, []);\n\n  function handleCardLike(card, isLiked) {\n    if (isLiked) {\n      api\n        .deleteLike(card._id)\n        .then((newCard) => {\n          setCards((state) =>\n            state.map((c) => (c._id === card._id ? newCard : c))\n          );\n        })\n        .catch((err) => {\n          console.log(`Ошибка: ${err}`);\n        });\n    } else {\n      api\n        .addLike(card._id)\n        .then((newCard) => {\n          setCards((state) =>\n            state.map((c) => (c._id === card._id ? newCard : c))\n          );\n        })\n        .catch((err) => {\n          console.log(`Ошибка: ${err}`);\n        });\n    }\n  }\n\n  function handleDeleteCard(card) {\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== card._id));\n      })\n      .catch((err) => {\n        console.log(`Ошибка: ${err}`);\n      });\n  }\n\n  React.useEffect(() => {\n    api\n      .getUserInfo()\n      .then((user) => {\n        setCurrentUser(user);\n      })\n      .catch((err) => {\n        console.log(`Ошибка: ${err}`);\n      });\n  }, []);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard({\n      isOpen: true,\n      name: card.name,\n      link: card.link,\n    });\n  }\n\n  function handleUpdateUser({ name, about }) {\n    api\n      .addNewUserInfo(name, about)\n      .then(() => {\n        setCurrentUser({ ...currentUser, name: name, about: about });\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(`Ошибка: ${err}`);\n      });\n  }\n\n  function handleUpdateAvatar({ avatar }) {\n    api\n      .updateAvatar(avatar)\n      .then(() => {\n        setCurrentUser({ ...currentUser, avatar: avatar });\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(`Ошибка: ${err}`);\n      });\n  }\n\n  function handleAddPlace(name, link) {\n    api\n      .addNewCard({ name, link })\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(`Ошибка: ${err}`);\n      });\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsInfoTooltipOpen(false);\n    setSelectedCard({\n      isOpen: false,\n      name: '',\n      link: '',\n    });\n  }\n\n  React.useEffect(() => {\n    const closeByEscape = (e) => {\n      if (e.key === 'Escape') {\n        closeAllPopups();\n      }\n    };\n\n    document.addEventListener('keydown', closeByEscape);\n\n    return () => document.removeEventListener('keydown', closeByEscape);\n  }, []);\n\n  function handleLogin(email, password) {\n    auth\n      .authorize(email, password)\n      .then((res) => {\n        setLoggedIn(true);\n        setUserEmail(email);\n        localStorage.setItem('email', email);\n        navigate('/');\n      })\n      .catch((err) => {\n        if (err === '400') {\n          console.log('не передано одно из полей');\n        } else if (err === '401') {\n          console.log('пользователь с email не найден');\n        } else {\n          console.log(`Ошибка: ${err}`);\n        }\n      });\n  }\n\n  function handleRegister(email, password) {\n    auth\n      .register(email, password)\n      .then((res) => {\n        setLoggedIn(true);\n        handleCheckRegister(true);\n        setUserEmail(email);\n        localStorage.setItem('email', email);\n      })\n      .catch((err) => {\n        handleCheckRegister(false);\n        if (err === '400') {\n          console.log('некорректно заполнено одно из полей');\n        } else {\n          console.log(`Ошибка: ${err}`);\n        }\n      });\n  }\n\n  function handleCheckRegister(isRegister) {\n    setIsInfoTooltipOpen(true);\n    if (isRegister) {\n      navigate('/');\n    }\n  }\n\n  const location = useLocation();\n\n  React.useEffect(() => {\n    handleTokenCheck(location.pathname);\n  }, []);\n\n  function handleTokenCheck(path) {\n    if (localStorage.getItem('token')) {\n      auth\n        .checkToken(localStorage.getItem('token'))\n        .then((res) => {\n          if (res) {\n            setLoggedIn(true);\n            navigate(path);\n          }\n        })\n        .catch((err) => {\n          if (err === '400') {\n            console.log('Токен не передан или передан не в том формате');\n          } else if (err === '401') {\n            console.log('Переданный токен некорректен');\n          } else {\n            console.log(`Ошибка: ${err}`);\n          }\n        });\n    }\n  }\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('email');\n    setLoggedIn(false);\n    setUserEmail('');\n    navigate('/sign-in');\n  };\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <Routes>\n        <Route\n          exact\n          path='/'\n          element={\n            <RequireAuth\n              loggedIn={loggedIn}\n              component={Main}\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onEditAvatar={handleEditAvatarClick}\n              onCardClick={handleCardClick}\n              cards={cards}\n              onCardLike={handleCardLike}\n              onCardDelete={handleDeleteCard}\n              onLogout={handleLogout}\n              userEmail={userEmail}\n            />\n          }\n        />\n        <Route\n          path='/sign-up'\n          element={<Register onSubmit={handleRegister} />}\n        />\n        <Route path='/sign-in' element={<Login onSubmit={handleLogin} />} />\n        <Route\n          path='*'\n          element={\n            <RequireAuth\n              loggedIn={loggedIn}\n              component={Main}\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onEditAvatar={handleEditAvatarClick}\n              onCardClick={handleCardClick}\n              cards={cards}\n              onCardLike={handleCardLike}\n              onCardDelete={handleDeleteCard}\n              onLogout={handleLogout}\n              userEmail={userEmail}\n            />\n          }\n        />\n      </Routes>\n\n      <Footer />\n\n      <InfoTooltip\n        isRegister={loggedIn}\n        isOpen={isInfoTooltipOpen}\n        onClose={closeAllPopups}\n      />\n\n      <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n\n      <EditProfilePopup\n        isOpen={isEditProfilePopupOpen}\n        onClose={closeAllPopups}\n        onUpdateUser={handleUpdateUser}\n      />\n\n      <EditAvatarPopup\n        isOpen={isEditAvatarPopupOpen}\n        onClose={closeAllPopups}\n        onUpdateAvatar={handleUpdateAvatar}\n      />\n\n      <AddPlacePopup\n        isOpen={isAddPlacePopupOpen}\n        onClose={closeAllPopups}\n        onAddPlace={handleAddPlace}\n      />\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.querySelector(\".root\")\n);\n"],"sourceRoot":""}